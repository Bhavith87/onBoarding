<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <meta name="viewport" content="width=, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
    crossorigin="anonymous"></script>
  <title>On Boarding Form</title>
  <style>
    input {
      width: 500px;
      border-radius: 3px;
    }

    body {

      background: #f7f9fb;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
    }

    .header-banner {
      background-color: #2c3e50;
      color: white;
      padding: 25px 0;
      text-align: center;
      font-size: 32px;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    .container {
      padding: 30px;
      background-color: white;
      border-radius: 10px;
      width: 80%;
      max-width: 1000px;
      margin: 40px auto;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);

    }

    h3,
    h5 {
      color: #34495e;
    }

    b {
      color: #2c3e50;
    }

    .mt-2 {
      margin-top: 15px;
    }

    .mt-3 {
      margin-top: 20px;
    }

    .mt-4 {
      margin-top: 30px;
    }

    input[type="text"] {
      padding: 6px 8px;
      width: 400px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    input[type="text"]:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 5px rgba(52, 152, 219, 0.4);
    }

    input[type="email"] {
      padding: 6px 8px;
      width: 400px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    input[type="email"]:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 5px rgba(52, 152, 219, 0.4);
    }

    input[type="date"] {
      padding: 6px 8px;
      width: 400px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    input[type="date"]:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 5px rgba(52, 152, 219, 0.4);
    }

    input[type="file"] {
      padding: 6px 8px;
      width: 400px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    input[type="file"]:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 5px rgba(52, 152, 219, 0.4);
    }
    select {
      padding: 6px 8px;
      width: 400px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    select:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 5px rgba(52, 152, 219, 0.4);
    }

    input[type="number"] {
      padding: 6px 8px;
      width: 400px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    input[type="number"]:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 5px rgba(52, 152, 219, 0.4);
    }

    input[type="checkbox"] {
      width: 10px;

    }

    .remove-btn {
      background-color: #2c3e50;
      color: white;
      margin-left: 510px;
      margin-bottom: 10px;
    }
  </style>
</head>

<body>
  <h1 style="text-align: center;" class="header-banner m-4">Welocme To Employee Boarding Form</h1>
  <div class="container" style="margin-left: 100px; margin-top: 30px;">
    <h3>Personal Details : </h3>
    <hr style="border: 2px solid #34495e; width : 600px ; margin-left: 0;">
    <div style="margin-left: 30px;">
      <div class="mt-2">Name(Full Name) :-<input type="text" style="margin-left: 50px;" id="name"
          onkeypress="validateKey(event,'name')" minlength="5" maxlength="30" oninput="validateName('name','Name')"
          required>
        <div id="nameError" style="color: red; font-size: 12px;margin-left:200px;"></div>
      </div>
      <div class="mt-2">Email ID :-<input type="email" style="margin-left: 115px;" id="email" oninput="validateEmail()"
          required>
        <div id="emailError" style="color: red; font-size: 12px;margin-left:200px;"></div>
      </div>
      <div class="mt-2">Phone No:-<input type="text" style="margin-left: 108px;" id="phone"
          onkeypress="validateNumberkey(event,'phone')" minlength="10" maxlength="10" oninput="phoneNumber()" required>
        <div id="phoneNumberError" style="color: red; font-size: 12px;margin-left:200px;"></div>
      </div>
      <div class="mt-2">Alternate Number :-<input type="text" style="margin-left: 48px;" id="phoneAl"
          onkeypress="validateNumberkey(event,'phoneAl')" minlength="10" maxlength="10" oninput="phoneAlNumber()"
          required>
        <div id="alternateNumberError" style="color: red; font-size: 12px;margin-left:200px;"></div>
      </div>
      <div class="mt-2">Marital Status :-<input type="text" style="margin-left: 77px;" id="marital"
          onkeypress="validateKey(event,'marital')" minlength="5" maxlength="30"
          oninput="validateName('marital','Martital Status')" required>
        <div id="maritalError" style="color: red; font-size: 12px;margin-left:200px;"></div>
      </div>
      <div class="mt-2">Date of Birth :-<input type="date" style="margin-left: 82px;" id="doB"
          oninput="validateDob('doB','DOB')">
        <div id="doBError" style="color: red; font-size: 12px;margin-left:200px;"></div>
      </div>
      <div class="mt-2">
        <label for="gender" style="margin-left:0px;">Gender:-</label>
        <select id="gender" name="degree" style="margin-left: 120px; width: 400px;">
          <option value="">--Select--</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
      </div>
      <div class="mt-2">
        <label for="bloodGroup" style="margin-left:0px;">Select Blood Group</label>
        <select id="bloodGroup" name="degree" style="margin-left: 45px; width: 400px;">
          <option value="">--Select--</option>
          <option value="A+">A+</option>
          <option value="A-">A-</option>
          <option value="B+">B+</option>
          <option value="B-">B-</option>
          <option value="O+">O+</option>
          <option value="O-">O-</option>
          <option value="AB+">AB+</option>
          <option value="AB-">AB-</option>
        </select>
      </div>
      <!-- <div class="mt-2">Passport Number & Name as per ID :-<input type="text" style="margin-left: 65px;" required></div>
            <div class="mt-2">Voters ID & Name as per ID :-<input type="text" style="margin-left: 123px;" required></div> -->
      <div class="mt-2">Aadhar ID :-<input type="text" style="margin-left: 100px;" id="aadhar" maxlength="14"
          oninput="formatAadhar()" required>
        <div id="aadharError" style="color: red; font-size: 12px;margin-left:200px;"></div>
      </div>
      <div class="mt-2">Upload Aadhar:-<input type="file" style="margin-left: 68px;" required></div>
      <div class="mt-2">PAN ID :-<input type="text" style="margin-left:120px;" id="pan" oninput="validatePAN()"
          maxlength="10" required>
        <div id="panError" style="color: red; font-size: 12px;margin-left:200px;"></div>
      </div>
      <div class="mt-2">Upload Pan:-<input type="file" style="margin-left: 94px;" required></div>
      <!-- <div class="mt-2">UAN No :-<input type="text" style="margin-left: 257px;" required></div>
            <div class="mt-2">PAN ID & Name as per ID :-<input type="text" style="margin-left: 135px;" required></div> -->
      <div class="mt-2"> Guardian Name:-<input type="text" style="margin-left: 62px;" minlength="5" maxlength="30"
          id="gName" onkeypress="validateKey(event,'gName')" oninput="validateName('gName','GuardianName')" required>
        <div id="gNameError" style="color: red; font-size: 12px;margin-left:200px;"></div>
      </div>
      <div class="mt-2"> Guardian Number :-<input type="text" style="margin-left: 42px;" minlength="10"
          maxlength="10" id="gPnum" onkeypress="validateNumberkey(event,'gPnum')"
          oninput="validateNumberkey('gPnum','GuardianPhoneNumbet')" required>
        <div id="gNameError" style="color: red; font-size: 12px;margin-left:200px;"></div>
      </div>
    </div>


    <h3 class="mt-4">Educations details</h3>
    <hr style="border: 2px solid #34495e; width : 600px ; margin-left: 0;">
    <!-- <h5 class="mt-2" style="margin-left: 30px;">Post-Graduation</h5> -->
    <div id="education-container" style="margin-left: 50px; ">
      <div class="education-entry m-2">
        <label for="degrees" style="margin-left:0px;">Select Degree</label>
        <select id="degree-0" name="degree-0" style="margin-left: 42px; width: 400px;">
          <option value="">--Select--</option>
          <option value="postgraduation">Post-Graduation</option>
          <option value="graduation">Graduation</option>
          <option value="intermediate">Intermediate</option>
          <option value="ssc">SSC</option>
        </select>
        <div class="mt-2">College Name :-<input type="text" style="margin-left: 30px;" name="collegeName-0"
            id="collegeName-0" minlength="5" maxlength="30" onkeypress="validateKey(event,'collegeName-0')"
            oninput="validateName('collegeName-0','College Name')" required>
          <div id="collegeName-0Error" style="color: red; font-size: 12px;margin-left:160px;"></div>
        </div>
        <div class="mt-2">Stream :-<input type="text" style="margin-left: 80px;" name="stream-0" id="stream-0"
            minlength="5" maxlength="30" onkeypress="validateKey(event,'stream-0')"
            oninput="validateName('stream-0','Stream')" required>
          <div id="stream-0Error" style="color: red; font-size: 12px;margin-left:160px;"></div>
        </div>
        <div class="mt-2">Year of passing :-<input type="text" style="margin-left: 25px;" name="yearOfPassing-0"
            id="yearOfPassing-0" maxlength="4" minlength="4" onkeypress="validateNumberkey(event,'yearOfPassing-0')"
            oninput="validateYearOfPassing()" required>
          <div id="yearOfPassing-0Error" style="color: red; font-size: 12px;margin-left:160px;"></div>
        </div>
        <div class="mt-2">Location :-<input type="text" style="margin-left: 68px;" name="location-0" id="location-0"
            onkeypress="validateKey(event,'location-0')" oninput="validateName('location-0','Location')" required>
          <div id="location-0Error" style="color: red; font-size: 12px;margin-left:160px;"></div>
        </div>
        <div class="mt-2">Aggregate/% :-<input type="text" style="margin-left: 35px;" name="aggregation-0"
            id="aggregation-0" maxlength="3" minlength="1" onkeypress="validateNumberkey(event,'aggregation-0')"
            oninput="validateAggregation()" required>
          <div id="aggregation-0Error" style="color: red; font-size: 12px;margin-left:160px;"></div>
        </div>
        <div class="mt-2">Upload Certificates:-<input type="file" style="margin-left: 1px;" name="file-0" id="file-0"
            required></div>

      </div>
    </div>
    <button class="btn  m-3" onclick="addEducation()" style="background-color: #2c3e50; color: white;">Add
      Education</button>
    <!-- <button class="btn  m-3" onclick="removeEducation()" style="background-color: #2c3e50; color: white;"> Remove Education</button> -->

    <!-- <div><b>*Please justify with reason in case of gap between educations to education:</b></div> -->
    <!-- ?????????????????? -->


    <div class="mt-2"> <b style="font-size: 25px;">Employment History </b>(Kindly mention all your employments including
      current one)<div>
        <hr style="border: 2px solid #34495e; width : 600px ; margin-left: 0;">
        <div id="experience-container">
          <div style="margin-left: 50px;" class="experience-entry">
            <div class="mt-2">Company Name :-<input type="text" style="margin-left: 30px;" name="companyname-0"
                id="companyname-0" minlength="5" maxlength="30" onkeypress="validateKey(event,'companyname-0')"
                oninput="validateName('companyname-0','Company Name')" required>
              <div id="companyname-0Error" style="color: red; font-size: 12px;margin-left:160px;"></div>
            </div>
            <div class="mt-2">Designation/Role :-<input type="text" style="margin-left: 25px;" name="role-0"
                id="role-0" minlength="5" maxlength="30" onkeypress="validateKey(event,'role-0')"
                oninput="validateName('role-0','Role')" required>
              <div id="role-0Error" style="color: red; font-size: 12px;margin-left:160px;"></div>
            </div>
            <div class="mt-2">Last Project Name :-<input type="text" style="margin-left: 18px;" name="projectName-0"
                id="projectName-0" minlength="5" maxlength="30" onkeypress="validateKey(event,'projectName-0')"
                oninput="validateName('projectName-0','ProjectName')" required>
              <div id="projectName-0Error" style="color: red; font-size: 12px;margin-left:160px;"></div>
            </div>
            <div class="mt-2">Company Start Date:-<input type="date" style="margin-left: 10px;" name="startDate-0"
                id="startDate-0" oninput="validateExperienceDates()" required>
              <div id="startDate-0Error" style="color: red; font-size: 12px;margin-left:160px;"></div>
            </div>
            <div class="mt-2">Company End Date:-<input type="date" style="margin-left: 15px;" id="endDate-0"
                name="endDate-0" oninput="validateExperienceDates()" required>
              <div id="endDate-0Error2" style="color: red; font-size: 12px;margin-left:160px;"></div>
            </div>
            <div class="mt-2">Key Client Name:-<input type="text" style="margin-left: 32px;" name="clientName-0"
                id="clientName-0" minlength="5" maxlength="30" onkeypress="validateKey(event,'clientName-0')"
                oninput="validateName('clientName-0','ClientName')" required>
              <div id="clientName-0Error" style="color: red; font-size: 12px;margin-left:160px;"></div>
            </div>
            <div class="mt-2">Location :-<input type="text" style="margin-left: 85px;" name="companyLocation-0"
                id="companyLocation-0" onkeypress="validateKey(event,'companyLocation-0')"
                oninput="validateName('companyLocation-0','Location')" required>
              <div id="companyLocation-0Error" style="color: red; font-size: 12px;margin-left:160px;"></div>
            </div>
          </div>
        </div>
        <button class="btn mt-3" onclick="addExperience()" style="background-color: #2c3e50; color: white;">Add
          Experience</button>
        <!-- <button class="btn mt-3" onclick="removeExperience()" style="background-color: #2c3e50; color: white;margin-left: 20px;">Remove Experience</button> -->


        <!-- <div><b>*Please justify with reason in case of gap between educations to employment OR Employment to Employment</b></div> -->
        <h3 class="mt-2">Address Details:</h3>
        <hr style="border: 2px solid #34495e; width : 600px ; margin-left: 0;">
        <div>
          <div class="mt-3" style="margin-left: 50px;"> Permanent Address :-<input type="text"
              style="margin-left: 22px;" id="pAddress" minlength="5" maxlength="30" required>
            <div id="pAddressError" style="color: red; font-size: 12px;margin-left:180px;"></div>
          </div>

          <div class="mt-3" style="margin-left: 50px;"> Street :-<input type="text" style="margin-left: 115px;"
              id="pStreet" minlength="5" maxlength="30" onkeypress="validateKey(event,'pStreet')"
              oninput="validateName('pStreet','Street')" required>
            <div id="pStreetError" style="color: red; font-size: 12px;margin-left:180px;"></div>
          </div>

          <div class="mt-3" style="margin-left: 50px;"> City :-<input type="text" style="margin-left: 128px;"
              id="pCity" minlength="5" maxlength="30" onkeypress="validateKey(event,'pCity')"
              oninput="validateName('pCity','City')" required>
            <div id="pCityError" style="color: red; font-size: 12px;margin-left:160px;"></div>
          </div>

          <div class="mt-3" style="margin-left: 50px;"> State :-<input type="text" style="margin-left: 118px;"
              id="pState" minlength="5" maxlength="30" onkeypress="validateKey(event,'pState')"
              oninput="validateName('pState','Street')" required>
            <div id="pStateError" style="color: red; font-size: 12px;margin-left:160px;"></div>
          </div>

          <div class="mt-3" style="margin-left: 50px;"> Country :-<input type="text" style="margin-left: 95px;"
              id="pCountry" minlength="5" maxlength="30" onkeypress="validateKey(event,'pCountry')"
              oninput="validateName('pCountry','Country')" required>
            <div id="pCountryError" style="color: red; font-size: 12px;margin-left:160px;"></div>
          </div>

          <div class="mt-3" style="margin-left: 50px;"> Pincode :-<input type="text" style="margin-left: 94px;"
              id="pPincode" minlength="6" maxlength="6" onkeypress="validateNumberkey(event,'pPincode')" required>
          </div>


          <div class="mt-2"><input type="checkbox" id="copyaddress" style="margin-left: 10px;"
              onclick="copyaddress()"><span style="margin-left: 10px;">is current address as same as Permanent
              address</span></div>
          <div>
            <div class="mt-2"><b style="font-size: 20px;">Current Address - </b>(All address details for last 5 years,
              start from latest. Dates mandatory to be filled)</div>
            <hr style="border: 2px solid #34495e; width : 600px ; margin-left: 0;">
            <div class="mt-3" style="margin-left: 50px;"> Current Address :-<input type="text" id="cAddress"
                style="margin-left: 42px;" minlength="5" maxlength="30" required>
              <div id="cAddressError" style="color: red; font-size: 12px;margin-left:180px;"></div>
            </div>
            <div class="mt-3" style="margin-left: 50px;"> Street :-<input type="text" id="cStreet"
                style="margin-left: 115px;" minlength="5" maxlength="30" onkeypress="validateKey(event,'cStreet')"
                oninput="validateName('cStreet','Street')" required>
              <div id="cStreetError" style="color: red; font-size: 12px;margin-left:180px;"></div>
            </div>
            <div class="mt-3" style="margin-left: 50px;"> City :-<input type="text" id="cCity"
                style="margin-left: 128px;" minlength="5" maxlength="30" onkeypress="validateKey(event,'cCity')"
                oninput="validateName('cCity','City')" required>
              <div id="cCityError" style="color: red; font-size: 12px;margin-left:180px;"></div>
            </div>
            <div class="mt-3" style="margin-left: 50px;"> State :-<input type="text" id="cState"
                style="margin-left: 118px;" minlength="5" maxlength="30" onkeypress="validateKey(event,'cState')"
                oninput="validateName('cState','State')" required>
              <div id="cStateError" style="color: red; font-size: 12px;margin-left:180px;"></div>
            </div>
            <div class="mt-3" style="margin-left: 50px;"> Country :-<input type="text" id="cCountry"
                style="margin-left: 95px;" minlength="5" maxlength="30" onkeypress="validateKey(event,'cCountry')"
                oninput="validateName('cCountry','Country')" required>
              <div id="cCountryError" style="color: red; font-size: 12px;margin-left:180px;"></div>
            </div>
            <div class="mt-3" style="margin-left: 50px;"> Pincode :-<input type="text" id="cPincode"
                style="margin-left: 94px;" minlength="6" maxlength="6"
                onkeypress="validateNumberkey(event,'cPincode')" oninput="validateNumberkey(event,'cPincode')"
                required></div>
          </div>
          <!-- <div class="mt-4"><b>Please justify Gaps in stay / movement: -</b></div> -->

        </div>
        <h3>Bank Details : </h3>
        <hr style="border: 2px solid #34495e; width : 600px ; margin-left: 0;">
        <!-- <div class="mt-2">Bank Details :-<input type="text" style="margin-left: 227px; " id="bankdetails" oninput="validateName('bankdetails','BankDetails')" required>
                 
                  <div id="bankdetailsError" style="color: red; font-size: 12px;margin-left:340px;"></div></div> -->
        <div style="margin-left: 30px;">
          <div class="mt-2">Name as per Bank Form :-<input type="text" style="margin-left: 25px;" id="bname"
              minlength="5" maxlength="30" onkeypress="validateKey(event,'bname')"
              oninput="validateName('bname','Name')" required>
            <div id="bnameError" style="color: red; font-size: 12px;margin-left:220px;"></div>
          </div>
          <div class="mt-2">Account No:-<input type="text" style="margin-left: 113px;" id="bankAccount" minlength="8"
              maxlength="18" oninput="validateBankAccount()" required>
            <div id="bankAccountError" style="color: red; font-size: 12px;margin-left:220px;"></div>
          </div>
          <div class="mt-2">IFSC code:-<input type="text" style="margin-left: 127px;" id="ifsc" minlength='11'
              maxlength="11" oninput="validateIfsc()" required>
            <div id="ifscError" style="color: red; font-size: 12px;margin-left:220px;"></div>
          </div>
          <div class="mt-2">Branch Name:-<input type="text" style="margin-left: 100px;" id="branchName" minlength="5"
              maxlength="30" onkeypress="validateKey(event,'branchName')"
              oninput="validateName('branchName','BranchName')" required>
            <div id="branchNameError" style="color: red; font-size: 12px;margin-left:120px;"></div>
          </div>
        </div>
        </div>
        </div>
        <button class="btn mt-4" style="background-color: #2c3e50;color: white; margin-left: 40%;" onclick="submit()">submit</button>
      </div>
      <script>

        function validateExperienceDates() {
          const startInput = document.getElementById('startDate-0');
          const endInput = document.getElementById('endDate-0');
          const errorMsg = document.getElementById('startDate-0Error');
          const errorMsg2 = document.getElementById('endDate-0Error2');


          const startDate = new Date(startInput.value);
          const endDate = new Date(endInput.value);
          const today = new Date();
          today.setHours(0, 0, 0, 0); // reset time for accurate comparison

          // Clear previous errors
          errorMsg.textContent = '';
          startInput.style.border = '';
          endInput.style.border = '';

          if (isNaN(startDate) || isNaN(endDate)) {
            return; // skip validation until both are selected
          }

          if (startDate >= endDate) {
            errorMsg.textContent = "Start date must be before end date.";
            startInput.style.border = '2px solid red';
            endInput.style.border = '2px solid red';
            return;
          }

          if (startDate >= today) {
            errorMsg.textContent = "Dates must be before today's date.";
            startInput.style.border = '2px solid red';
            endInput.style.border = '2px solid red';
            return;
          }
          if (endDate >= today) {
            errorMsg2.textContent = "EndDate date must be before end date.";
            startInput.style.border = '2px solid red';
            endInput.style.border = '2px solid red';
            return;
          }
          else {
            errorMsg2.textContent = '';
          }
        }


        
       async function submit() {
          const fields = [
            'name', 'email', 'phone', 'phoneAl', 'marital', 'doB', 'gender', 'bloodGroup',
            'aadhar', 'pan', 'gName', 'gPnum',
            'pAddress', 'pStreet', 'pCity', 'pState', 'pCountry', 'pPincode',
            'cAddress', 'cStreet', 'cCity', 'cState', 'cCountry', 'cPincode',
            'bname', 'bankAccount', 'ifsc', 'branchName'
          ];

          let isComplete = true;
          let formData = {};

          // General fields
          for (let field of fields) {
            const value = document.getElementById(field).value.trim();
            if (!value) {
              isComplete = false;
              alert("Please fill all required fields.");
              document.getElementById(field).focus();
              break;
            }
            formData[field] = value;
          }

          // Education section
          const educationEntries = [];
          const eduSections = document.querySelectorAll('[id^="education-"]');

          eduSections.forEach((section, index) => {
            const degree = document.getElementById(`degree-${index}`)?.value.trim();
            const collegeName = document.getElementById(`collegeName-${index}`)?.value.trim();
            const stream = document.getElementById(`stream-${index}`)?.value.trim();
            const yearOfPassing = document.getElementById(`yearOfPassing-${index}`)?.value.trim();
            const location = document.getElementById(`location-${index}`)?.value.trim();
            const aggregation = document.getElementById(`aggregation-${index}`)?.value.trim();
            const file = document.getElementById(`file-${index}`)?.value.trim();

            if (!degree || !collegeName || !stream || !yearOfPassing || !location || !aggregation || !file) {
              isComplete = false;
              alert("Please complete all education fields.");
              return;
            }

            educationEntries.push({ degree, collegeName, stream, yearOfPassing, location, aggregation, file });
          });

          formData.education = educationEntries;

          // Experience section
          const experienceEntries = [];
          const expSections = document.querySelectorAll('.experience-entry'); // Using .experience-entry class here

          expSections.forEach((section, index) => {
            const companyName = document.getElementById(`companyname-${index}`)?.value.trim();
            const jobTitle = document.getElementById(`role-${index}`)?.value.trim();
            const projectName = document.getElementById(`projectName-${index}`)?.value.trim();
            const startDate = document.getElementById(`startDate-${index}`)?.value.trim();
            const endDate = document.getElementById(`endDate-${index}`)?.value.trim();
            const clientName = document.getElementById(`clientName-${index}`)?.value.trim();
            const location = document.getElementById(`companyLocation-${index}`)?.value.trim();

            if (!companyName || !jobTitle || !projectName || !startDate || !endDate || !clientName || !location) {
              isComplete = false;
              alert("Please complete all experience fields.");
              return; // Exit loop if experience section is incomplete
            }

            experienceEntries.push({
              companyName, jobTitle, projectName, startDate, endDate, clientName, location
            });
          });

          formData.experience = experienceEntries;

          // Store in localStorage as an array////////////////////////////////////////
           try {
    const response = await fetch("http://localhost:8080/api/onboarding/submit", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(formData)
    });

    if (response.ok) {
      const result = await response.json();
      alert("Form submitted successfully! ID: " + result.id);
    } else {
      alert("Error submitting form. Please try again.");
    }
  } catch (error) {
    console.error("Error:", error);
    alert("Something went wrong.");
  }
}




        function validateName(id, fieldname) {
          var name = document.getElementById(id).value;
          var regex = /^[a-zA-Z]+$/;
          if (name.length < 5) {
            // document.getElementById("name").style.border="1px solid red";
            document.getElementById(id + "Error").textContent = fieldname + " " + "Should be at least 5 min character and maximum of 30";
            return false;
          }
          else if (!regex.test(name)) {
            document.getElementById(id + "Error").textContent = fieldname + " " + "Should be at least 5 min character";

            // document.getElementById("name");
            return false;
          }
          else {
            document.getElementById(id + "Error").textContent = '';
          }
          return true;
        }
        function validateKey() {
          var key = event.key;
          var regex = /^[a-zA-Z ]$/;
          if (!regex.test(key)) {
            event.preventDefault();
          }
        }

        function validateNumberkey() {
          var key = event.key;
          var regex = /^[0-9]$/;
          if (!regex.test(key)) {
            event.preventDefault();
          }
        }
        function validateEmail() {
          var input = document.getElementById('email');
          var error = document.getElementById('emailError');
          var value = input.value.trim().toLowerCase();

          // Basic email pattern
          var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

          if (value.length === 0) {
            error.textContent = "";
            return false;
          }

          if (!emailPattern.test(value)) {
            error.textContent = "Please enter a valid email address.";
            return false;
          }

          // Allowed domains
          if (value.endsWith("@gmail.com") || value.endsWith("@yahoo.com") || value.endsWith("@outlook.com")) {
            error.textContent = ""; // Valid
          } else {
            error.textContent = "Only Gmail, Yahoo, or Outlook emails are allowed.";
          }
          const dotComIndex = value.indexOf(".com");
          if (dotComIndex !== -1 && value.length > dotComIndex + 4) {
            input.value = value.substring(0, dotComIndex + 4);
            error.textContent = "No characters allowed after .com"
          }

          return true;

        }

        function phoneNumber() {
          var phoneNumber = document.getElementById("phone").value;
          var phoneRegex = /^\d{10}$/;
          if (phoneNumber.length != 10) {
            document.getElementById("phoneNumberError").innerText = "Phone Number Must be 10 Digits"
            return false;
          }
          else if (!phoneRegex.test(phoneNumber)) {
            document.getElementById("phoneNumberError").innerText = "Phone Number Must be 10 Digits"
            return false;
          }
          else {
            document.getElementById("phoneNumberError").innerText = "";
          }
          return true;
        }

        function phoneAlNumber() {
          var phoneNumber = document.getElementById("phoneAl").value;
          var phoneRegex = /^\d{10}$/;
          if (phoneNumber.length != 10) {
            document.getElementById("alternateNumberError").innerText = "Phone Number Must be 10 Digits"
            return false;
          }
          else if (!phoneRegex.test(phoneNumber)) {
            document.getElementById("alternateNumberError").innerText = "Phone Number Must be 10 Digits";
            return false;
          }
          else {
            document.getElementById("alternateNumberError").innerText = "";
          }
          return true;
        }
        function validateDob(id, fieldName) {
          var dob = new Date(document.getElementById(id).value);
          var today = new Date();

          var age = today.getFullYear() - dob.getFullYear();
          var monthDiff = today.getMonth() - dob.getMonth();

          if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
            age--;
          }

          var errorElement = document.getElementById(id + "Error");

          if (age < 22) {
            errorElement.innerText = "You should be at least 22 years old.";
            document.getElementById(id).style.border = "1px solid red";
            return false;
          } else {
            errorElement.innerText = "";
            document.getElementById(id).style.border = "1px solid green";
            return true;
          }
        }
        function formatAadhar() {
          let input = document.getElementById('aadhar');
          let error = document.getElementById('aadharError');

          // Remove all non-digit characters
          let value = input.value.replace(/\D/g, '');

          // Limit to maximum 12 digits
          if (value.length > 12) {
            value = value.slice(0, 12);
          }
          // Add spaces after every 4 digits
          let formattedValue = value.match(/.{1,4}/g)?.join(' ') || '';

          input.value = formattedValue;
          // Validation: Check if exactly 12 digits
          if (value.length === 12) {
            // Check if first digit is between 2 and 9
            if (parseInt(value.charAt(0)) >= 2) {
              error.textContent = ""; // No error
            } else {
              error.textContent = "Aadhar number should start with digits between 2-9.";
              return false;
            }
          } else {
            error.textContent = "Aadhar number must be exactly 12 digits.";
            return false;
          }
          return true;
        }
        function validatePAN() {
          let input = document.getElementById('pan');
          let error = document.getElementById('panError');

          // Always convert to uppercase automatically
          input.value = input.value.toUpperCase();

          let value = input.value;

          const panPattern = /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/;

          if (value.length === 10) {
            if (panPattern.test(value)) {
              error.textContent = ""; // Valid PAN
            } else {
              error.textContent = "Invalid PAN format. Format should be: 5 letters, 4 numbers, 1 letter.";
            }
          } else if (value.length > 0 && value.length < 10) {
            error.textContent = "PAN must be exactly 10 characters.";
          } else {
            error.textContent = "";
            return true;
          }
        }



        function validateYearOfPassing() {

          let input = document.getElementById('yearOfPassing-0');
          let error = document.getElementById('yearOfPassing-0Error');

          // Remove non-digits immediately
          input.value = input.value.replace(/\D/g, '');

          let value = input.value;
          let currentYear = new Date().getFullYear();

          if (value.length === 4) {
            let year = parseInt(value);

            if (year >= 1950 && year <= currentYear + 2) {
              error.textContent = ""; // Valid year
            } else {
              error.textContent = "Enter a valid year between 1950 and " + (currentYear + 2) + ".";
            }
          } else if (value.length > 0 && value.length < 4) {
            error.textContent = "Year must be exactly 4 digits.";
          } else {
            error.textContent = "";
            return true;
          }
        }
        function validateAggregation() {
          var input = document.getElementById("aggregation-0");
          var error = document.getElementById("aggregation-0Error");

          var value = input.value.trim();
          var score = parseFloat(value);
          if (score.length === 0) {
            error.textContent = "Percentage is Required."
            return false;
          }
          else if (score < 0 || score > 100) {
            error.textContent = "Enter apercentage between 0 to 100"
            return false;
          }
          else {
            error.textContent = ""
            return true;
          }
        }



        function validateIfsc() {
          let input = document.getElementById('ifsc');
          let error = document.getElementById('ifscError');

          // Always convert input to uppercase
          input.value = input.value.toUpperCase();

          let value = input.value;

          const ifscPattern = /^[A-Z]{4}0[A-Z0-9]{6}$/;

          if (value.length === 11) {
            if (ifscPattern.test(value)) {
              error.textContent = ""; // Valid IFSC
            } else {
              error.textContent = "Invalid IFSC format. Should be 4 letters, 0, then 6 letters/numbers.";
            }
          } else if (value.length > 0 && value.length < 11) {
            error.textContent = "IFSC must be exactly 11 characters.";
          } else {
            error.textContent = "";
          }
        }
        function validateBankAccount() {
          let input = document.getElementById('bankAccount');
          let error = document.getElementById('bankAccountError');

          // Remove non-digits immediately
          input.value = input.value.replace(/\D/g, '');

          let value = input.value;

          if (value.length > 0 && (value.length < 9 || value.length > 18)) {
            error.textContent = "Bank account number must be between 9 and 18 digits.";
          } else {
            error.textContent = ""; // Valid
            return false;
          }
        }


        function addEducation() {
          const container = document.getElementById("education-container");
          const entries = container.querySelectorAll('.education-entry');
          const newIndex = entries.length;

          const firstEntry = entries[0];
          const newEntry = firstEntry.cloneNode(true);
          newEntry.classList.add('education-entry');
          newEntry.id = `education-${newIndex}`;

          const inputs = newEntry.querySelectorAll("input, select, textarea");
          inputs.forEach(input => {
            input.value = "";
            if (input.id) {
              const baseId = input.id.split('-')[0];
              input.id = `${baseId}-${newIndex}`;
            }
            if (input.name) {
              const baseName = input.name.split('-')[0];
              input.name = `${baseName}-${newIndex}`;
            }
          
          });

          const buttonWrapper = document.createElement("div");
          buttonWrapper.className = "button-wrapper";
          const removeBtn = document.createElement("button");
          removeBtn.className = "remove-btn";
          removeBtn.textContent = "Remove";
          removeBtn.onclick = () => {
            newEntry.remove();
          }
          buttonWrapper.appendChild(removeBtn);
          newEntry.insertBefore(buttonWrapper, newEntry.firstChild)
          container.appendChild(newEntry);
        }
        //let experienceCount = 1; // Declare globally

        function addExperience() {
          const container = document.getElementById("experience-container");
          const entries = container.querySelectorAll('.experience-entry');
          const newIndex = entries.length;

          const firstEntry = entries[0];
          const newEntry = firstEntry.cloneNode(true);
          newEntry.classList.add('experience-entry');
          newEntry.id = `experience-${newIndex}`;

          const inputs = newEntry.querySelectorAll("input, select, textarea");
          inputs.forEach(input => {
            input.value = "";
            if (input.id) {
              const baseId = input.id.split('-')[0];
              input.id = `${baseId}-${newIndex}`;
            }
            if (input.name) {
              const baseName = input.name.split('-')[0];
              input.name = `${baseName}-${newIndex}`;
            }
          });

          const buttonWrapper = document.createElement("div");
          buttonWrapper.className = "button-wrapper";
          const removeBtn = document.createElement("button");
          removeBtn.className = "remove-btn mt-2";
          removeBtn.textContent = "Remove";
          removeBtn.onclick = () => {
            newEntry.remove();
          }
          buttonWrapper.appendChild(removeBtn);
          newEntry.insertBefore(buttonWrapper, newEntry.firstChild)
          container.appendChild(newEntry);
        }

        function copyaddress() {
          var copyCheck = document.getElementById("copyaddress");
          if (copyCheck.checked) {
            document.getElementById("cAddress").value = document.getElementById("pAddress").value;
            document.getElementById("cStreet").value = document.getElementById("pStreet").value;
            document.getElementById("cCity").value = document.getElementById("pCity").value;
            document.getElementById("cState").value = document.getElementById("pState").value;
            document.getElementById("cCountry").value = document.getElementById("pCountry").value;
            document.getElementById("cPincode").value = document.getElementById("pPincode").value;

          }
          else {
            document.getElementById("cAddress").value = " ";
            document.getElementById("cStreet").value = "";
            document.getElementById("cCity").value = "";
            document.getElementById("cState").value = "";
            document.getElementById("cCountry").value = "";
            document.getElementById("cPincode").value = "";
          }
        }
      </script>


</body>

</html>